<!DOCTYPE html>
<html>
<body>
	<canvas id="imgCanvas" width="700" height="700" style="border:1px solid #d3d3d3;"></canvas>
	<img src="img/test.png" id="image">

	<style>
		img {
			display: none;
		}
	</style>
	<script>
	var ctx = document.getElementById("imgCanvas").getContext("2d");
	var img = document.getElementById("image");


	function drawImage() {
		ctx.drawImage(img, 10, 10);
	}


	rValue=[]
	dataSet=[]
	function copy() {
		var imgData = ctx.getImageData(10, 10, img.width, img.height);
		for (i=0; i<imgData.data.length/4; i++) {
			rValue[i]=imgData.data[4*i]
		}
		for (j=0; j<img.height; j++) {
			for (i=0; i<img.width; i++) {
				if (rValue[i+img.width*j]>250 && rValue[i+img.width*j-1]<250) {
					dataSet[dataSet.length]=[i-1,j]
				} else if (rValue[i+img.width*j]>250 && rValue[i+img.width*j+1]<250) {
					dataSet[dataSet.length]=[i+1,j]
				} else if (rValue[i+img.width*j]>250 && rValue[i+img.width*(j-1)]<250) {
					dataSet[dataSet.length]=[i,j-1]
				} else if (rValue[i+img.width*j]>250 && rValue[i+img.width*(j+1)]<250) {
					dataSet[dataSet.length]=[i,j+1]
				}
			} 
		}		

		// document.getElementById("test").innerHTML=imgData.data;
	}

	function replicate() {
		for (i=0; i<dataSet.length; i++) {
			ctx.fillRect(dataSet[i][0],dataSet[i][1]+img.height+100,1,1)
		}
	}

	</script>

	<button onclick="copy()">Copy</button>
	<button onclick="drawImage()">img</button>
	<button onclick="replicate()">rplct</button>
	<span id="test">
	<span id="test1">
	<span id="test2">

</body>
</html>
